(function(){var internal={firstrun:!0,is_supported:window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),loaded_scripts:[]};if(!internal.is_supported){var pjax_shell={connect:function(){},invoke:function(){var e=2===arguments.length?arguments[0]:arguments.url;document.location=e}};return void("function"==typeof define&&define.amd?define(function(){return pjax_shell}):window.pjax=pjax_shell)}internal.addEvent=function(e,t,n){e.addEventListener(t,n,!1)},internal.clone=function(e){var t={};for(var n in e)t[n]=e[n];return t},internal.triggerEvent=function(e,t,n){var r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),"undefined"!=typeof n&&(r.data=n),e.dispatchEvent(r)},internal.addEvent(window,"popstate",function(e){if(null!==e.state){var t={url:e.state.url,container:e.state.container,title:e.state.title,history:!1};if("undefined"!=typeof internal.options)for(var n in internal.options)"undefined"==typeof t[n]&&(t[n]=internal.options[n]);var r=internal.parseOptions(t);if(r===!1)return;internal.handle(r)}}),internal.attach=function(e,t){if(e.protocol===document.location.protocol&&e.host===document.location.host&&!(e.pathname===location.pathname&&e.hash.length>0)){var n=["pdf","doc","docx","zip","rar","7z","gif","jpeg","jpg","png"];"undefined"==typeof t.ignoreFileTypes&&(t.ignoreFileTypes=n),-1===t.ignoreFileTypes.indexOf(e.pathname.split(".").pop().toLowerCase())&&(t.url=e.href,e.getAttribute("data-pjax")&&(t.container=e.getAttribute("data-pjax")),e.getAttribute("data-title")&&(t.title=e.getAttribute("data-title")),t=internal.parseOptions(t),t!==!1&&internal.addEvent(e,"click",function(e){return e.which>1||e.metaKey||e.ctrlKey?void 0:(e.preventDefault?e.preventDefault():e.returnValue=!1,document.location.href===t.url?!1:void internal.handle(t))}))}},internal.parseLinks=function(e,t){var n;n="undefined"!=typeof t.useClass?e.getElementsByClassName(t.useClass):e.getElementsByTagName("a");for(var r,i=0;i<n.length;i++){var a=n[i];("undefined"==typeof t.excludeClass||-1===a.className.indexOf(t.excludeClass))&&(r=internal.clone(t),r.history=!0,internal.attach(a,r))}if(internal.firstrun){for(var o=document.getElementsByTagName("script"),s=0;s<o.length;s++)o[s].src&&-1===internal.loaded_scripts.indexOf(o[s].src)&&internal.loaded_scripts.push(o[s].src);internal.triggerEvent(internal.get_container_node(t.container),"ready")}},internal.smartLoad=function(e,t){var n=e.getElementsByTagName("title")[0];n&&(document.title=n.innerHTML);var r=e.querySelector("#"+t.container.id);return null!==r?r:e},internal.updateContent=function(e,t){var n=document.createElement("div");if(n.innerHTML=e,t.smartLoad&&(n=internal.smartLoad(n,t)),"undefined"==typeof t.title&&(t.title=document.title,!t.smartLoad)){var r=n.getElementsByTagName("title");0!==r.length&&(t.title=r[0].innerHTML)}return t.container.innerHTML=n.innerHTML,t.parseJS&&internal.runScripts(n),t},internal.runScripts=function(html){for(var scripts=html.getElementsByTagName("script"),sc=0;sc<scripts.length;sc++)if(scripts[sc].src&&-1===internal.loaded_scripts.indexOf(scripts[sc].src)){var s=document.createElement("script");s.src=scripts[sc].src,document.head.appendChild(s),internal.loaded_scripts.push(scripts[sc].src)}else eval(scripts[sc].innerHTML)},internal.handle=function(e){internal.triggerEvent(e.container,"beforeSend",e),internal.request(e.url,function(t){return t===!1?(internal.triggerEvent(e.container,"complete",e),void internal.triggerEvent(e.container,"error",e)):(e=internal.updateContent(t,e),e.history&&(internal.firstrun&&(window.history.replaceState({url:document.location.href,container:e.container.id,title:document.title},document.title),internal.firstrun=!1),window.history.pushState({url:e.url,container:e.container.id,title:e.title},e.title,e.url)),e.parseLinksOnload&&internal.parseLinks(e.container,e),internal.triggerEvent(e.container,"complete",e),internal.triggerEvent(e.container,"success",e),e.autoAnalytics&&e.history&&(window._gaq&&_gaq.push(["_trackPageview"]),window.ga&&ga("send","pageview",{page:e.url,title:e.title})),document.title=e.title,void(e.returnToTop&&window.scrollTo(0,0)))})},internal.request=function(e,t){var n;try{n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(r){return void console.log("Unable to create XMLHTTP Request")}n.onreadystatechange=function(){4===n.readyState&&200===n.status?t(n.responseText):4!==n.readyState||404!==n.status&&500!==n.status||t(!1)},n.open("GET",e+(/[?&]/.test(e)?"&_pjax":"?_pjax"),!0),n.setRequestHeader("X-PJAX","true"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(null)},internal.parseOptions=function(e){var t={history:!0,parseLinksOnload:!0,smartLoad:!0,autoAnalytics:!0,returnToTop:!0,parseJS:!1};if("undefined"==typeof e.url||"undefined"==typeof e.container||null===e.container)return console.log("URL and Container must be provided."),!1;for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);e.history=e.history===!1?!1:!0,e.container=internal.get_container_node(e.container);var r=["ready","beforeSend","complete","error","success"];for(var i in r){var a=r[i];"function"==typeof e[a]&&internal.addEvent(e.container,a,e[a])}return e},internal.get_container_node=function(e){return"string"==typeof e&&(e=document.getElementById(e),null===e)?(console.log("Could not find container with id:"+e),!1):e},this.connect=function(){var e={};2===arguments.length&&(e.container=arguments[0],e.useClass=arguments[1]),1===arguments.length&&("string"==typeof arguments[0]?e.container=arguments[0]:e=arguments[0]),delete e.title,delete e.history,internal.options=e,"complete"===document.readyState?internal.parseLinks(document,e):internal.addEvent(window,"load",function(){internal.parseLinks(document,e)})},this.invoke=function(){var e={};2===arguments.length?(e.url=arguments[0],e.container=arguments[1]):e=arguments[0],e=internal.parseOptions(e),e!==!1&&internal.handle(e)};var pjax_obj=this;"function"==typeof define&&define.amd?define(function(){return pjax_obj}):window.pjax=pjax_obj}).call({});